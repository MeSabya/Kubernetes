## 1. How do Pods communicate in Kubernetes?
ðŸ‘‰ In Kubernetes, each Pod has an IP address. A Pod can communicate with another Pod by directly addressing its IP address, but the recommended way is to use Services. A Service is a set of Pods, which can be reached by a single, fixed DNS name or IP address.

**Step1**: Create the Pod and give it a label - The Pod is usually created through another object like a Deployment, a StatefulSet, or, in OpenShift, a DeploymentConfig. The Pod is assigned a the label in its JSON or YAML, like app: api.

**step2**: Create a Service which selects the backend Pod - A Service is created which selects all Pods that match the given label. This is done by specifying a selector in the Service definition. In this example, the Service is called my-api and it selects Pods with the label app=api.

**Step3**: The app communicates with the backend using the service name as the hostname - The app can now address the API using the Service name as the hostname. So if the app talks to the backend over HTTP then it would look like http://my-api:8080.

![image](https://user-images.githubusercontent.com/33947539/148223276-147c8042-a5cb-4b2e-b9ad-952f69ad255b.png)

If the Pods die, or they need to be restarted, this wonâ€™t affect the app, because it will still communicate with the API pods via the Service, which has a stable IP address.

## 2. How do containers in the same Pod communicate?

Multiple containers in the same Pod share the same IP address. They can communicate with each other by addressing localhost. For example, if a container in a Pod wants to reach another container in the same Pod on port 8080, it can use the address localhost:8080.

Because multi-container Pods share the same IP address and communicate on localhost, this means that two containers canâ€™t share the same port, if theyâ€™re in the same Pod.

## 3. what's the difference between Deployment and Replica set?
>Both replica set and deployment have the attribute replica: 3, what's the difference between deployment and replica set? Does deployment work via replica set under the hood?
![image](https://user-images.githubusercontent.com/33947539/153546341-1ef1f656-c8f5-432e-a1e8-d31cec0f8478.png)

**Answer:** 

A deployment is a higher abstraction that manages one or more replicasets to provide controlled rollout of a new version.

Lets say you use ReplicaSet-A for controlling your pods, then You wish to update your pods to a newer version, now you should create Replicaset-B, scale down ReplicaSet-A and scale up ReplicaSet-B by one step repeatedly (This process is known as rolling update). Although this does the job, but it's not a good practice and it's better to let K8S do the job.

A Deployment resource does this automatically without any human interaction and increases the abstraction by one level.

Note: Deployment doesn't interact with pods directly, it just does rolling update using ReplicaSets.

## 4. What happens when the Kubernetes master fails?

Kubernetes cluster without a master is like a company running without a Manager.

No one else can instruct the workers(k8s components) other than the Manager(master node)
(even you, the owner of the cluster, can only instruct the Manager)

Everything works as usual. Until the work is finished or something stopped them.(because the master node died after assigning the works)

As there is no Manager to re-assign any work for them, the workers will wait and wait until the Manager comes back.

The best practice is to assign multiple managers(master) to your cluster.

## 5. Explain the value and benefits of container orchestration ?

It's important to have an understanding of Kubernetes capabilities around self-healing, automated scheduling, rollouts, and rollbacks

## 6. What is the difference between deploying an application on hosts versus containers?
Be prepared to talk about the value of [containers and] Kubernetes in terms of speed, efficiency, and reliability

## 7. How do you load balance in Kubernetes?

## 8. How do you automate in Kubernetes?

## 9. How do you scale a Kubernetes cluster?

## 10. Can you explain the different uses for deployments, ReplicaSets, StatefulSets, pods, CronJobs?

## 11. How does Kubernetes handle persistence?

## 12. What are services and ingresses used for?

## 13. When would you use something like a ConfigMap or a secret?

## 14. What is a pod affinity used for?

## 15. Can you give an example of when to use an Init Container?

## 16. What is a sidecar container? Can you give a use case for why you would use one?

## 17. Explain to me why youâ€™d suggest that a company build their own Kubernetes cluster in the cloud versus using a managed service ?

## 18. What are Istio and Linkerd?

## 19. matchLabels, labels, and selectors explained in detail?

```yaml
kind: Deployment
...
metadata:
  name: nginx
  labels:
    app: nginx
    tier: backend
spec:
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
        tier: backend
...
```
### metadata labels 
The first metadata describes the deployment itself. 
It gives a label for that actual deployment. So, if you want to delete that deployment, you would say kubectl delete -l app=nginx,tier=backend. 

### template 
The template is actually a podTemplate. It describes a pod that is launched. One of the fields for the pod templates is replicas. If we set replicas to 2, it would make 2 pods for that deployment, and the deployment would entail both of those pods. So, that template for the pod has a label. So, this isnâ€™t a label for the deployment anymore, itâ€™s a label for the pod that the deployment is deploying.

### matchLabels
we have to tell the deployment to match the pods that itâ€™s deploying. Why doesnâ€™t the deployment automatically match the pod itâ€™s deploying? I have no idea.
*the selector: matchLabels tells the resource, whatever it may be, service, deployment, etc, to match the pod, according to that label.*

Only Job, Deployment, Replica Set, and Daemon Set support matchLabels.

## 20. Kubernetes NodePort vs LoadBalancer vs Ingress? When should I use what?

## 21. Difference between targetPort and port in Kubernetes Service definition?

```yaml
kind: Service
apiVersion: v1
metadata:
  name: my-service
spec:
  selector:
    app: MyApp
  ports:
  - protocol: TCP
    port: 80
    targetPort: 9376
```
What is the difference between the port and targetPort?

**nodePort**: The port on the node where external traffic will come in on

**port**: The port of this service, Some times your application inside container serves different services on a different port.

**targetPort**: This is the actual port on which your application is running inside the container.

### Example: 
The actual application can run 8080 and health checks for this application can run on 8089 port of the container. So if you hit the service without port it doesn't know to which port of the container it should redirect the request. Service needs to have a mapping so that it can hit the specific port of the container.

```yaml
kind: Service
apiVersion: v1
metadata:
  name: my-service
spec:
  selector:
    app: MyApp
  ports:
    - name: http
      nodePort: 30475
      port: 8089
      protocol: TCP
      targetPort: 8080
    - name: metrics
      nodePort: 31261
      port: 5555
      protocol: TCP
      targetPort: 5555
    - name: health
      nodePort: 30013
      port: 8443
      protocol: TCP
      targetPort: 8085
```
*if you hit the my-service:8089 the traffic is routed to 8080 of the container(targetPort). Similarly, if you hit my-service:8443 then it is redirected to 8085 of the container(targetPort). But this myservice:8089 is internal to the kubernetes cluster and can be used when one application wants to communicate with another application. So to hit the service from outside the cluster someone needs to expose the port on the host machine on which kubernetes is running so that the traffic is redirected to a port of the container. This is node port(port exposed on the host machine). From the above example, you can hit the service from outside the cluster(Postman or any rest-client) by host_ip:nodePort

Say your host machine ip is 10.10.20.20 you can hit the http, metrics, health services by 10.10.20.20:30475, 10.10.20.20:31261, 10.10.20.20:30013.*

## 22. Difference between Container port and targetport in Kubernetes?
In a nutshell: targetPort and containerPort basically refer to the same port (so if both are used they are expected to have the same value) but they are used in two different contexts and have entirely different purposes.

They cannot be used interchangeably as both are part of the specification of two distinct kubernetes resources/objects: Service and Pod respectively. While the purpose of containerPort can be treated as purely informational, targetPort is required by the Service which exposes a set of Pods.

It's important to understand that by declaring containerPort with the specific value in your Pod/Deployment specification you cannot make your Pod to expose this specific port e.g. if you declare in containerPort field that your nginx Pod exposes port 8080 instead of default 80, you still need to configure your nginx server in your container to listen on this port.

Declaring containerPort in Pod specification is optional. Even without it your Service will know where to direct the request based on the info it has declared in its targetPort.

It's good to remember that it's not required to declare targetPort in the Service definition. If you omit it, it defaults to the value you declared for port (which is the port of the Service itself).

## 

 
 
